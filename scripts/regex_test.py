markdown_content = """
CHARACTER: Raegan Hayes
FILE_START
# Raegan Hayes - Character Arc

## Description
Raegan Hayes is a mid-twenties woman, slender, soft-featured, and usually dressed in professional office attire that understates a quietly sensual appeal. Raised by her grandmother after losing her parents early, she has cultivated resilience, modesty, and a people-pleasing streak. An accomplished designer, she insisted on keeping her job as personal assistant at Dixon Group even after secretly marrying its CEO, Mitchel Dixon. She is newly—and secretly—pregnant. Throughout the novel Raegan oscillates between vulnerable insecurity and flashes of backbone that foreshadow her eventual bid for independence.

## Role
Female Protagonist

## Key Relationships
• Mitchel Dixon – secret husband and boss; romantically and sexually entangled. Mitchel generally dominates their intimacy (light power-play, no explicit BDSM label) while Raegan is emotionally submissive.
• Lauren Murray – Mitchel’s ex and chief rival; antagonistic, emotional war focused on Mitchel’s affection.
• Kyler Dixon – affectionate grandfather-in-law who sees her as a granddaughter.
• Luciana Dixon – protective mother-in-law who favors Raegan and scorns Lauren.
• Nicole – loyal best friend and confidante.
• Tessa Dixon – bullying cousin-in-law; workplace and social antagonist.
• Luis – Mitchel’s friend; source of painful gossip for Raegan.
• Henley – caring former classmate/doctor; quiet potential ally.
• Kieran – Nicole’s boyfriend who sexually harasses Raegan.

## Power Dynamics
Professionally and matrimonially Raegan is subordinate to Mitchel—he is her employer, wealthier, and physically stronger. Socially she is outgunned by Lauren’s status as “first love” and by Tessa’s family name, yet Raegan occasionally seizes moral high ground (e.g., slapping Tessa, refusing apologetic humiliation). Her pregnancy and secret marriage give her hidden leverage that she rarely uses.

## Motivation
Raegan’s core drive is to gain genuine, exclusive love from Mitchel while preserving her self-respect. Pregnancy intensifies her desire for stability and protection of her unborn child. Betrayal gradually shifts her goal toward self-preservation: divorcing with dignity, shielding her baby, and rebuilding her identity outside Mitchel’s shadow.
FILE_END

CHARACTER: Mitchel Dixon
FILE_START
# Mitchel Dixon - Character Arc

## Description
Mitchel Dixon, around 30, is the charismatic, impeccably tailored CEO of Dixon Group. Tall, broad-shouldered, with a controlled air of authority, he balances board-room ruthlessness with flashes of protectiveness. Pressured two years earlier by his dying grandfather to marry, he entered a secret, transactional union with Raegan but never severed emotional ties to first love Lauren. His outward composure masks internal conflict and guilt.

## Role
Male Protagonist

## Key Relationships
• Raegan Hayes – secret wife/employee; sexually dominant partner who oscillates between caring protector and emotionally distant boss.
• Lauren Murray – ex-girlfriend; emotionally enmeshed, feels indebted, manipulated by her illness; periodic sexual tension but holds back due to marriage vows.
• Kyler Dixon – beloved grandfather whose wishes Mitchel tries to honor.
• Luciana – strong-willed mother who scolds him, sides with Raegan.
• Luis – best friend/adviser who urges divorce.
• Tessa & Kenia – troublesome cousin and aunt; family politics.

## Power Dynamics
Mitchel wields corporate and financial power over most characters. With Raegan he exerts occupational authority and physical dominance in intimate scenes, yet her pregnancy and moral stance gradually erode his control. Lauren manipulates him through illness and guilt, neutralizing some of his autonomy. Mother Luciana and grandfather Kyler can override him via filial piety.

## Motivation
Initially driven by duty—to family, to Lauren’s medical needs, to corporate image—Mitchel seeks to compartmentalize marriage and first love. As conflicts intensify, self-interest collides with awakened affection for Raegan, forcing him to decide between obligation and authentic desire.
FILE_END

CHARACTER: Lauren Murray
FILE_START
# Lauren Murray - Character Arc

## Description
Lauren Murray is a late-twenties socialite with delicate beauty marred by chronic illness requiring transplants and frequent hospital stays. Often seen in designer clothes or a wheelchair, she projects frailty that hides calculating tenacity. She re-enters Mitchel’s life after years abroad, intent on reclaiming her status as his true partner.

## Role
Female Antagonist

## Key Relationships
• Mitchel Dixon – obsessive romantic fixation; leverages illness and sexual appeals to secure marriage.
• Raegan Hayes – rival; antagonistic, uses manipulation, framing, and bribery to displace her.
• Jocelyn – loyal caretaker/accomplice who shields Lauren’s schemes.
• Tessa Dixon – occasional pawn in Lauren’s plots.

## Power Dynamics
Though physically weak, Lauren wields emotional blackmail over Mitchel—suicide threats, tears, and public spectacles. She subjugates Tessa via flattery and money, and attempts to dominate Raegan through humiliation and sabotage. Her power hinges on perceived fragility.

## Motivation
Lauren’s singular goal is to marry Mitchel and ensure lifelong security. Fear of mortality and jealousy of Raegan propel her to increasingly ruthless tactics, culminating in plots against Raegan’s pregnancy.
FILE_END

CHARACTER: Luis
FILE_START
# Luis - Character Arc

## Description
Luis is Mitchel’s longtime friend and company confidant, early thirties, smooth-talking and pragmatic. As a Dixon Group executive he observes corporate and personal drama with a cynical eye.

## Role
Male Confidant

## Key Relationships
Functions mainly as Mitchel’s sounding board, pushing him toward divorcing Raegan and reuniting with Lauren.

## Power Dynamics
Holds informal influence over Mitchel through friendship but no direct authority over other characters.

## Motivation
Wants Mitchel unentangled and focused on business; sees Raegan as an obstacle, Lauren as sentimental distraction but easier to explain socially.
FILE_END

CHARACTER: Tessa Dixon
FILE_START
# Tessa Dixon - Character Arc

## Description
Tessa, early-twenties socialite and Mitchel’s spoiled cousin, flaunts her status within the Dixon family. She is fashionable, sharp-tongued, and prone to petty cruelty.

## Role
Female Antagonist

## Key Relationships
Harasses Raegan at work and socially; idolizes Lauren as “proper” partner for Mitchel; supported by her mother Kenia.

## Power Dynamics
Relies on family name for authority inside Dixon Group; easily overridden by Mitchel or Kyler but abuses employees beneath her.

## Motivation
Seeks validation and elevation within the family by aligning with Lauren and belittling Raegan.
FILE_END

CHARACTER: Kenia
FILE_START
# Kenia - Character Arc

## Description
Kenia is Tessa’s image-conscious mother, middle-aged, refined yet haughty, intertwined with Dixon family politics.

## Role
Family Antagonist

## Key Relationships
Supports Tessa’s attacks on Raegan; deference to Kyler and Mitchel when overruled.

## Power Dynamics
Minor social leverage through familial ties.

## Motivation
Protect family prestige, ensure daughter’s standing.
FILE_END

CHARACTER: Kyler Dixon
FILE_START
# Kyler Dixon - Character Arc

## Description
Kyler, Mitchel’s elderly, silver-haired grandfather, is patriarch of the Dixon clan. Warm-hearted and traditional, he values family continuity and grandchildren.

## Role
Wise Patriarch

## Key Relationships
Fond of Raegan, pressures Mitchel to settle and produce heirs; scolds relatives who mistreat Raegan.

## Power Dynamics
Moral authority over entire family; his approval or disappointment shapes Mitchel’s choices.

## Motivation
Wishes to see lineage secured and loved ones harmonious before his health fails.
FILE_END

CHARACTER: Luciana Dixon
FILE_START
# Luciana Dixon - Character Arc

## Description
Luciana, Mitchel’s forties-something mother, commands a regal presence, sharp eyes behind designer glasses. Protective, outspoken, and unafraid to confront wrongdoing.

## Role
Maternal Ally

## Key Relationships
Champions Raegan as daughter-in-law; openly dismisses Lauren; reprimands Mitchel for insensitivity.

## Power Dynamics
Leverages maternal authority and social influence to defend Raegan, intimidating Lauren and even Mitchel.

## Motivation
Prioritizes son’s honor and chooses Raegan as preferable partner; determined to curb scandals that could tarnish family name.
FILE_END

CHARACTER: Nicole
FILE_START
# Nicole - Character Arc

## Description
Nicole is Raegan’s vivacious best friend from college, mid-twenties, quick-witted, loyal, and unapologetically blunt.

## Role
Female Confidant

## Key Relationships
Supports Raegan emotionally; tangled with boyfriend Kieran and ex-fiancé Jarrod.

## Power Dynamics
Limited; provides moral support rather than authority.

## Motivation
Protect friend’s wellbeing, navigate her own rocky love life while remaining staunchly on Raegan’s side.
FILE_END

CHARACTER: Kieran
FILE_START
# Kieran - Character Arc

## Description
Kieran, late-twenties charmer with predatory undertones, is Nicole’s new boyfriend. Stylish yet sleazy, he reveals misogynistic aggression when rebuffed.

## Role
Minor Antagonist

## Key Relationships
Attempts to flirt and later threaten Raegan; relationship with Nicole rapidly deteriorates.

## Power Dynamics
Relies on intimidation and sexual harassment—quickly neutralized by Nicole and public embarrassment.

## Motivation
Self-gratification and conquest; loses interest once exposed.
FILE_END

CHARACTER: Henley
FILE_START
# Henley - Character Arc

## Description
Henley is a gentle, conscientious doctor and former classmate of Raegan’s, early-thirties. Calm demeanor, dependable.

## Role
Kind Helper

## Key Relationships
Secretly cares for Raegan, assists during hospital stay; neutral toward Mitchel.

## Power Dynamics
Possesses medical authority; otherwise peripheral.

## Motivation
Altruistic desire to help old friend and protect her pregnancy.
FILE_END

CHARACTER: Jarrod
FILE_START
# Jarrod - Character Arc

## Description
Jarrod, early-thirties, returns from a personal crisis abroad. Polite businessman with lingering connection to ex-fiancée Nicole.

## Role
Secondary Support

## Key Relationships
Old friend to Luis and Mitchel; unresolved tension with Nicole.

## Power Dynamics
Social equal within male friend group.

## Motivation
Reintegrate into friend circle, possibly rekindle with Nicole.
FILE_END

CHARACTER: Jocelyn
FILE_START
# Jocelyn - Character Arc

## Description
Jocelyn is Lauren’s middle-aged caretaker. Stern, discreet, and deeply loyal, she manages medications and appearances.

## Role
Loyal Servant

## Key Relationships
Protects and enables Lauren, destroys incriminating photos.

## Power Dynamics
Subordinate but indispensable to Lauren’s schemes.

## Motivation
Safeguard employer’s health and secrets.
FILE_END

CHARACTER: Kyle
FILE_START
# Kyle - Character Arc

## Description
Kyle is a junior employee at Dixon Group, newly assigned to learn Mitchel’s preferences from Raegan.

## Role
Minor Employee

## Key Relationships
Brief professional interaction with Raegan for handover.

## Power Dynamics
None significant.

## Motivation
Perform job duties efficiently.
FILE_END

CHARACTER: Matteo
FILE_START
# Matteo - Character Arc

## Description
Matteo is only referenced as the person who originally gave Raegan her wedding ring. No direct on-stage presence; identity and role remain vague.

## Role
Off-stage Mention

## Key Relationships
Indirect tie to Raegan via ring gift.

## Power Dynamics
None observable.

## Motivation
Unspecified; likely past acquaintance.
FILE_END
"""


def test_character_extraction():
    import re

    # The regex pattern to test
    pattern = re.compile(
        r"CHARACTER:\s*([^\n]+)\s*\n"  # name line
        r"FILE_START\s*\n"  # allow spaces before the newline
        r"([\s\S]*?)"  # block content (non-greedy)
        r"\s*FILE_END",  # optional spaces before FILE_END
        re.DOTALL,
    )

    # Find all matches
    matches = re.findall(pattern, markdown_content)

    # Print results
    print(f"Found {len(matches)} characters")

    # Print details for each match
    for i, (character_name, content) in enumerate(matches, 1):
        print(f"\nCharacter {i}:")
        print(f"Name: {character_name.strip()}")
        print(f"Content length: {len(content)} characters")
        print("First few lines of content:")
        print(content.split("\n")[0:3])  # Print first 3 lines of content
        print("-" * 50)


if __name__ == "__main__":
    test_character_extraction()
